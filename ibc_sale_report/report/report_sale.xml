<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
<!--    Template for the sale / quotation-->
    <template id="report_sale_document_ibc">
		<t t-call="ibc_sale_report.external_layout_ibc">
			<t t-set="doc" t-value="doc.with_context(lang=doc.partner_id.lang)" />
        <!--			Section for Bill To and Ship To-->
			<div class="page">
				<div class="row billing-shipping-outer-div" >
					<div class="billing-shipping-inner-div">
						<div class="individual-div">BILL TO</div>
						<div style="padding:5px" t-field="doc.partner_invoice_id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;], &quot;no_marker&quot;: True}"/>
					</div>
					<div class="billing-shipping-inner-div">
						<div class="individual-div">SHIP TO</div>
						<div style="padding:5px" t-field="doc.partner_shipping_id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;], &quot;no_marker&quot;: True}"/>
					</div>
				</div>

<!--			Section for FOB / Ship Via / Terms / Salesperson-->
				<table class="table table-sm o_main_table" style="margin-top:8px;">
					<thead  class="table table-sm o_main_table table-header-gray">
						<tr>
							<th class="text-left gray-head">FOB</th>
							<th class="text-left gray-head">SHIP VIA</th>
							<th class="text-left gray-head">TERMS</th>
							<th class="text-left gray-head">SALESPERSON</th>
						</tr>
					</thead>
					<tbody style="border:1px solid black" class="sale_tbody">
						<tr>
							<td><span t-field="doc.fob"/></td>
							<td><span t-esc="doc.ship_via"/></td>
							<td><span t-esc="doc.payment_term_id.name"/></td>
							<td><span t-esc="doc.user_id.name"/></td>
						</tr>
					</tbody>
				</table>
				<table class="table table-sm o_main_table" style="margin-top:8px;">
					<thead class="table table-sm o_main_table table-header-gray">
						<tr>
							<th class="text-left gray-head">#</th>
							<th class="text-left gray-head" name="th_description">PART/DETAILS</th>
							<th class="text-left gray-head" name="th_quantity">QTY</th>
							<th class="text-left gray-head" name="th_priceunit">PRICE</th>
							<th class="text-left gray-head" name="th_subtotal">TOTAL</th>
						</tr>
					</thead>
					<tbody style="border:1px solid black" class="sale_tbody">
						<t t-set="line_count" t-value="1"/>
						<t t-foreach="doc.order_line" t-as="line">
							<tr>
								<td>
									<span t-esc="line_count"/>
									<t t-set="line_count" t-value="line_count + 1"/>
								</td>
								<td name="td_name">
									<div class="col-6 text-left">
										<div><strong>IBC P/N:</strong> <t t-esc="line.product_id.default_code"/></div>
										<div t-field="line.product_id.barcode"/>
										<div><strong>Customer P/N:</strong> <t t-esc='line.customer_part_number'/></div>
										<p><t t-esc="line.name"/></p>
										<span><strong>Estimated Ship Date:</strong> <t t-esc='line.due_date'/> <span t-field="line.delivery_tolerance"/> </span>

									</div>
								</td>
								<td name="td_quantity"> <span t-field="line.product_uom_qty"/></td>
								<td name="td_priceunit" class="text-right">
									<span t-field="line.price_unit"/></td>
								<td  name="td_subtotal" class="text-right o_price_total"><span t-field="line.price_subtotal"/></td>
							</tr>
						</t>
					</tbody>
				</table>

				 <div class="clearfix" name="so_total_summary">
				 	<div style="border:1px solid black; background-color:lightgray">
						<p><strong>ORDER TOTALS</strong></p>
					</div>
					<div id="total" class="row order-detail-div" name="total" >
						<div style="width:70%;">
							<span style="font-size:24px; color:red">THIS IS NOT AN INVOICE DO NOT PAY</span>
						</div>
						<div style="width:30%;" >
							<table class="table table-sm">
								<tr class="border-black o_subtotal" style="">
									<td name="td_amount_untaxed_label"><strong>Subtotal</strong></td>
									<td name="td_amount_untaxed" class="text-right">
										<span t-field="doc.amount_untaxed"/>
									</td>
								</tr>
								<t t-foreach="doc.amount_by_group" t-as="amount_by_group">
									<tr style="">
										<t t-if="amount_by_group[5] == 1 and doc.amount_untaxed == amount_by_group[2]">
											<td name="td_amount_by_group_label_3">
												<span t-esc="amount_by_group[0]"/>
												<span>&amp;nbsp;<span>on</span>&amp;nbsp;<t t-esc="amount_by_group[2]" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/></span>
											</td>
											<td name="td_amount_by_group_3" class="text-right o_price_total">
												<span t-esc="amount_by_group[1]" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
											</td>
										</t>
										<t t-else="">
											<td name="td_amount_by_group_label">
												<span t-esc="amount_by_group[0]"/>
											</td>
											<td name="td_amount_by_group" class="text-right o_price_total">
												<span t-esc="amount_by_group[1]" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
											</td>
										</t>
									</tr>
								</t>
								<tr class="border-black o_total">
									<td name="td_amount_total_label"><strong>Total</strong></td>
									<td name="td_amount_total" class="text-right">
										<span t-field="doc.amount_total"/>
									</td>
								</tr>
							</table>
						</div>
					</div>
				</div>

				<table class="table table-sm o_main_table" style="margin-top:8px;">
					<thead class="table table-sm o_main_table table-header-gray">
						<tr>
							<th class="text-left gray-head">Remarks</th>
							
						</tr>
					</thead>
					<tbody style="border:1px solid black" class="sale_tbody">
						<tr>
							<td><span t-field="doc.remarks"/></td>
							
						</tr>
					</tbody>
				</table>
				<div>
					<div style="font-size:24px"><strong>Thank You</strong></div>
					<div style="border-bottom: 1px solid black;"/>
					<p>We sincerely appreciate your order for the items described above. If this acknowledgement is not correct in any way, 
					please notify us immediately so we may make the needed corrections before your order is processed.</p>
				</div>

<!--			Footer Section-->
			<div class="footer o_standard_footer ">
				<div >
					<div><strong>Warning:</strong> Cancer and Reproductive Harm</div>
					<div>www.P65Warnings.ca.gov</div>
				</div>
				<!-- <div class="row"> -->
					<div class="text-center">
						<strong>
						<span>CUSTOMER COPY -</span><span t-field="doc.warehouse_id.name"/></strong>
							<!-- <span>CUSTOMER COPY - UTAH</span></strong> -->
					</div>
					<div class="text-right">
						Page <span class="page"/> of <span class="topage"/>
					</div>
				<!-- </div> -->
			</div>
			</div>
		</t>
    </template>

<!--    Record to set doc for report-->
     <template id="report_sale_ibc">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="ibc_sale_report.report_sale_document_ibc" t-lang="doc.partner_id.lang"/>
            </t>
        </t>
    </template>
</odoo>